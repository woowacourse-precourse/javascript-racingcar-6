# 자동차 경주

## 2차 기능 목록

### 목표

이제 본격적으로 구현

1. commit 메시지를 의미 있게 작성해보기
2. 테스트 코드, (테스트 커버리지 넓히기)
3. indent 문제 조건은 2 이지만 1로 설정 why? 함수 분리를 더 연습하기 위해서
4. 코드 컨벤션에 집중
5. TDD 시도해보기 (테스트 실패 -> 코드 구현 어려울때는 코드구현 -> 테스트 구현)
6. 최대한 이름을 통해 의도 드러내도록 작성
7. 공백을 잘 활용하기
8. 함수 분리에 더 신경써서 함수별로 테스트를 작성해보기

후 순위

1. mvc 더 고민
2. JSDoc
3. 커스텀 에러
4. SOLID 원친 이전 미션 보다 더 적용해보기

### 2차 구현

- [x] 1. 경주할 자동차 이름을 입력 받는다.
- [x] 2. 차수를 시도할 횟수를 입력 받는다.
- [x] 3. 입력한 횟수 만큼 go or stop을 한다.
- [x] 4. 최종 우승자를 출력한다.

### 2차 설계

1. 경주할 자동차 이름을 입력 받는다.

   - [x] InputView 입력 받기
   - [x] Input에서 validator 체크
     - [x] 이름은 쉼표 기준으로 구분 (구분점 바뀔 수 있으니 상수로)
     - [x] 자동차 이름 2자 이상 5자 이하 (최소 글자 길이는 정해진게 없기 때문에 2자로 [스스로 결정])
     - [x] 자동차 최소 2대 이상부터 6대까지 (기록 레이싱이아닌 상대적 경쟁이기에 최소 2명이상 부터 [스스로 결정])
     - [x] 자동차 이름에 사용할 수 있는 문자 한국어와 영어만 허용 (대신 나중에 언어를 확장할 수 있도록 구현하기[스스로 결정])
     - [x] 자동차 이름을 중복으로 명명할 수 없다. ( 보통 닉네임은 중복허용하지 않음 [스스로 결정])

2. 시도할 횟수를 입력받는다.

   - [x] InputView 입력 받기
   - [x] Input에서 validator 체크
     - [x] 횟수 1~9회 제한 (제한이 정해지지 않았기 때문에 스스로 결정, 무한으로 할 수 없기 때문에) (언제든 변경하기 쉽도록)

3. 입력한 횟수 만큼 자동차 경주를 한다.
   - [x] '실행 결과' 메시지 출력
   - [x] 1. 랜덤한 숫자를 생성한다. (특정 숫자 이상이면 전진을 하기 위해)
   - [x] 2. 특정 숫자가 넘으면 차를 한 칸 앞으로 전진시킨다.
   - [x] 3. 한 경기가 끝날 때마다 결과를 출력한다.
   - [x] 입력 횟수 만큼 1~3를 반복한다.
4. 최종 우승자를 출력한다.
   - [x] 최종 우승자를 가려내다.
   - [x] 최종 우승자를 출력하다.

### 테스트

1. 경주할 자동차 이름을 입력 받는다.

   - [x] InputView에서 validator 체크
     - [x] 쉼표 기준으로 구분되는지
     - [x] 자동차 이름이 2자 이상 5자 이하인지
     - [x] 자동차 최소 2대 이상부터 6대 이하
     - [x] 자동차 이름에 한국어와 영어만 허용
     - [x] 자동차 이름 중복 확인

2. 시도할 횟수를 입력받는다.

   - [x] InputView에서 validator 체크
     - [x] 횟수 1~9회 인지 확인

3. 입력한 횟수 만큼 go or stop를 한다.

   - [x] 의도한 범위내에서 숫자가 생성되는지 확인
   - [x] 특정 숫자가 넘으면 차를 한 칸 앞으로 전진되는지 확인

4. 최종 우승자를 출력한다.
   - [x] 의도한대로 최종 우승자를 잘가려내는지 확인

### 유효성 검사

1. 경주할 자동차 이름을 입력 받는다.
   - [x] 구분자가 있는지 확인
   - [x] 자동차 이름 n자 이상 m 이하인지 확인
   - [x] 한글과 영어만 포함이 되어있는지
   - [x] n대 이상 부터 m대 이하인지
   - [x] 중복되는 이름이 존재하는지
2. 시도할 횟수를 입력받는다.
   - [x] 숫자 범위에 해당되는지 확인

---

---

## 1차 기능 목록

#### 목표

구현 해보기
테스트 코드는 유효성 검사 함수만 2차부터 본격
git commit 메시지 신경

### 구현

1. 경주할 자동차 이름을 입력 받는다.
2. 차수를 시도할 횟수를 입력 받는다.
3. 횟수 만큼 go or stop를 한다.
4. 최종 우승자를 출력한다.

### 설계

1. 경주할 자동차 이름을 입력 받는다.

   - [x] InputView 입력값 받기
   - [x] Input에서 validator 체크
     - [x] 이름은 쉼표 기준으로 구분 (구분점 바뀔 수 있으니 상수로)
     - [x] 자동차 이름 2자 이상 5자 이하 (2자 스스로 결정, 대부분 닉네임 종류 2글자 이상부터 시작)
     - [x] 자동차 최소 2대 이상부터 6대 (스스로 결정 경주이기에 2대부터 경쟁)
     - [x] 자동차 이름 제한이 정해지지 않았기 때문에 스스로 결정 -> 일반적으로 영어와 한글을 많이 사용하니 영어와 한글만 허용 나머지 에러 (예를들어 나중에 영어만 사용할 수 있으니 유동적 변경 고려해서 만들기)
     - [x] (추가)자동차 이름을 중복으로 명명할 수 없다. (스스로 결정)
     - 구분자가 처음과 끝에 있다면? -> 자동차 이름 길이 유효성 체크할 때 걸러져서 상관 x

2. 시도할 횟수를 입력받는다.
   - [x] InputView 입력값 받기
   - [x] input에서 validator 체크
     - [x] 1 ~ 9 회 제한( 제한이 정해지지 않았기 때문에 스스로 결정) 횟수 언제든 변경 가능하도록 만들기
3. 횟수 만큼 자동차 경주를 한다. (반복)
   - [x] (추가) 랜덤한 숫자를 생성한다.
   - [x] 자동차 대수 만큼 반목문을 돌면서 각 자동차마다 랜덤한 전진을 할당해준다.
   - [x] 각 반복 횟수마다 결과 값을 보여준다.
4. 최종 우승자를 출력한다.
   - [x] 객체 반복문을 돌면서 길이가 최대인 자동차를 뽑아내서 결과값 배열에 담는다.
   - [x] 결과값 배열을 출력한다.

### 유효성 검사

**사용자가 잘못된 값을 입력한 경우 `throw`문을 사용해 예외를 발생시킨후 애플리케이션은 종료**

1. 경주할 자동차 이름을 입력 받는다.
   - [x] 구분자가 있는지 확인
   - [x] 자동차 이름 n자 이상 m 이하인지 확인
   - [x] 한글과 영어만 포함이 되어있는지
   - [x] n대 이상 부터 m대 이하인지
   - [x] (추가) 중복되는 이름이 존재하는지
2. 시도할 횟수를 입력받는다.
   - [x] 숫자 범위에 해당되는지 확인

### 객체 설계

<img width="744" alt="image" src="https://github.com/Ryan-Dia/javascript-racingcar-6/assets/76567238/85b7c0be-84f5-4cea-a9a8-607ea00c985b">

### 1차 구현 후

1. 모델 부분을 상세하게 하지 않아 오히려 더 시간이 걸렸다
   조금 더 기능을 분리에서 구현하는 것이 좋을 것 같다.

2. 빠른 구현을 위해 validator만 테스트 코드를 작성했는데 다음 구현을 TDD를 적용해보자

3. validator 부분은 구현하다 추가적으로 생각나는 경우가 있다. 엣지 케이스를 더 깊게 생각해보자

4. 중간에 테스트 케이스를 빼먹은 함수도 있다. 기능 목록에 체크하면서 구현해나가자.

5. 2차 구현은 commit 메시지, 테스트 코드, indent, 코드 컨벤션에 집중하면서 해보자.

6. 2차 구현은 컨트롤러를 기능 단위로 분리해서 해보자

7. [SOLID](https://velog.io/@teo/Javascript%EC%97%90%EC%84%9C%EB%8F%84-SOLID-%EC%9B%90%EC%B9%99%EC%9D%B4-%ED%86%B5%ED%95%A0%EA%B9%8C)에 대해서 조금 더 생각해보면서 구현해보자

8. 모델 설계를 과연 올바르게 한 건지 고민해 보기

## 디렉토리 구조

```
📦src
 ┣ 📂constants
 ┃ ┣ 📜Messages.js
 ┃ ┗ 📜System.js
 ┣ 📂controller
 ┃ ┗ 📜index.js
 ┣ 📂model
 ┃ ┣ 📜Car.js
 ┃ ┣ 📜FinalWinnerSelector.js
 ┃ ┣ 📜RandomNumberGenerator.js
 ┃ ┗ 📜index.js
 ┣ 📂utils
 ┃ ┣ 📂error
 ┃ ┃ ┣ 📜DefaultError.js
 ┃ ┃ ┗ 📜ValidationError.js
 ┃ ┣ 📂validator
 ┃ ┃ ┣ 📂utils
 ┃ ┃ ┃ ┣ 📂is-duplication
 ┃ ┃ ┃ ┃ ┣ 📜index.js
 ┃ ┃ ┃ ┃ ┗ 📜index.test.js
 ┃ ┃ ┃ ┣ 📂is-valid-count
 ┃ ┃ ┃ ┃ ┣ 📜index.js
 ┃ ┃ ┃ ┃ ┗ 📜index.test.js
 ┃ ┃ ┃ ┣ 📂is-valid-delimiter
 ┃ ┃ ┃ ┃ ┣ 📜index.js
 ┃ ┃ ┃ ┃ ┗ 📜index.test.js
 ┃ ┃ ┃ ┣ 📂is-valid-language
 ┃ ┃ ┃ ┃ ┣ 📜index.js
 ┃ ┃ ┃ ┃ ┗ 📜index.test.js
 ┃ ┃ ┃ ┣ 📂is-valid-min-max
 ┃ ┃ ┃ ┃ ┣ 📜index.js
 ┃ ┃ ┃ ┃ ┗ 📜index.test.js
 ┃ ┃ ┃ ┣ 📂is-valid-name-length
 ┃ ┃ ┃ ┃ ┣ 📜index.js
 ┃ ┃ ┃ ┃ ┗ 📜index.test.js
 ┃ ┃ ┃ ┣ 📂is-valid-quantity
 ┃ ┃ ┃ ┃ ┣ 📜index.js
 ┃ ┃ ┃ ┃ ┗ 📜index.test.js
 ┃ ┃ ┃ ┗ 📜index.js
 ┃ ┃ ┗ 📜index.js
 ┃ ┗ 📜StringConvertor.js
 ┣ 📂view
 ┃ ┣ 📜InputView.js
 ┃ ┗ 📜OutputView.js
 ┣ 📜App.js
 ┗ 📜index.js
```

<br>

## 🥎 로직 순서도

```mermaid
graph TD;
   앱시작-->B[자동차 이름 입력 ];
   B["자동차 이름 입력"] --> C[유효성 확인]
   C[유효성 확인] ==true==> D[횟수 입력]
   C[유효성 확인] -.false.-> X[게임종료]
   D[횟수 입력] --> F[유효성확인]
   F[유효성확인] ==true==> G[자동차 세팅]
   F[유효성 확인] -.false.-> Y[게임종료]
   G[자동차 세팅] --> H[랜덤 번호 생성]
   H[랜덤 번호 생성] --4 이상--> K[자동차 이동]
   H[랜덤 번호 생성] --4 미만--> I[자동차 정지]
   K[자동차 이동] --> J[자동차 이동 현황 출력]
   I[자동차 정지] --> J[자동차 이동 현황 출력]
   J[자동차 이동 현황 출력] -- 횟수 만큼 반복-->H[랜덤 번호 생성]
   J[자동차 이동 현황 출력] --> L[최종 우승자 선정]
   L[최종 우승자 선정] --> M[최종 우승자 출력]
```

![Alt text](diagram.png)
