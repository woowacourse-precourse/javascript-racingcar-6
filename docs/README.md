# 기능 분석

## 게임 시작

1. 자동차의 이름을 입력받는다.
   - 사용자의 입력은 쉼표(,)를 기준으로 구분한다.
     - 쉼표를 기준으로 구분한 입력은 5자 이하만 가능하다.
     - 쉼표를 기준으로 구분한 입력은 중복될 수 없다.
     - 쉼표를 기준으로 구분한 입력은 1개 이상이어야 한다.
     - 디음 조건을 만족하지 않을 경우 예외를 발생시킨다.
2. 몇 번의 이동을 할 것인지를 입력받는다.
   - 사용자의 입력은 0 이상의 정수만 가능하다.
   - 숫자가 아닌 값이 입력되면 예외를 발생시킨다.

## 게임 진행

1. 입력받은 횟수만큼 자동차를 이동시킨다.
   - 자동차의 이동은 0~9 사이의 랜덤 값을 생성하여 4 이상일 경우 전진, 3 이하일 경우 멈춤으로 판단한다.

## 게임 종료

1. 게임이 종료되면 우승자를 출력한다.
   - 우승자는 한 명 이상일 수 있다.
   - 우승자가 여러 명일 경우 쉼표(,)를 이용하여 구분한다.

## 예외 처리

1. 사용자의 잘못된 입력에 대해 예외를 발생시킨다.
   - 예외 발생 시 "[ERROR]"로 시작하는 메시지를 출력한다.
   - 예외 발생 시 애플리케이션은 종료된다.

<br />

# 기능 구현

- MVC 패턴과 Observer 패턴을 적용하여 구현한다.

## Core

- 미션 수행을 위해 기본적으로 필요한 기능을 구현한다.

### Observer

- model 생성시 해당 클래스를 상속받아 옵저버 패턴을 적용한다.
- 내부 프로퍼티로 private한 `#data`를 가진다.
- `init()` 메서드를 통해 `#data`를 초기화한다.
- `subscribe()` 메서드를 통해 데이터 업데이트에 따른 콜백 함수를 등록한다.
- `notify()` 메서드를 통해 등록된 콜백 함수를 실행한다.
- `set()` 메서드를 통해 `#data`를 업데이트하고, `notify()` 메서드를 실행한다.
- `get()` 메서드를 통해 `#data`를 반환한다.

### InputValidate

- 입력에 대한 유효성 검사를 담당한다.
- `checkCarNames()` 메서드를 통해 자동차 이름에 대한 유효성 검사를 수행한다.
  - 자동차 이름이 입력되지 않았을 경우 예외를 발생시킨다.
  - 자동차 이름이 1자 미만, 5자 초과일 경우 예외를 발생시킨다.
  - 자동차 이름이 중복될 경우 예외를 발생시킨다.
- `checkTryCount()` 메서드를 통해 시도 횟수에 대한 유효성 검사를 수행한다.
  - 시도 횟수가 입력되지 않았을 경우 예외를 발생시킨다.
  - 시도 횟수가 0 미만일 경우 예외를 발생시킨다.

### CustomError

- 예외 발생시 커스텀한 에러를 생성한다.
- 에러 메시지 앞에 "[ERROR]"를 붙여 출력한다.

## Model

- 데이터 상태를 관리한다.
- `Observer` 클래스를 상속받아 옵저버 패턴을 적용한다.

### GameModel

- 게임 진행에 필요한 데이터를 관리한다.
- `자동차 이름`, `시도 횟수`, `우승자`, `현재 시도 횟수`를 관리한다.

## View

- 데이터를 화면에 출력한다.

### OutputView

- 게임 상태 변경시 화면을 출력한다.
- model을 주입받아 특정 model 데이터를 구독하여 데이터가 업데이트 될 때마다 화면을 업데이트한다.
- `printStatus()` 메서드를 통해 게임 상태를 출력한다.
  - ex) "pobi : --"
- `printWinners()` 메서드를 통해 우승자를 출력한다.
  - ex) "최종 우승자 : pobi, jun"

### InputView

- 게임 진행에 필요한 입력을 받는다.
- model을 주입받지 않고 데이터를 반환한다.
- `InputValidate` 클래스를 통해 입력에 대한 유효성 검사를 수행한다.
- `inputCarNames()` 메서드를 통해 자동차 이름을 입력받는다.
  - ex) "pobi,crong,honux"
- `inputTryCount()` 메서드를 통해 시도 횟수를 입력받는다.
  - ex) "5"

## Controller

- model과 view 사이 비즈니스 로직을 담당한다.

### GameController

- 게임 진행에 필요한 비즈니스 로직을 담당한다.
- View와 Model을 모두 가지고 있으며 View에 Model을 주입한다.
- `init()` 메서드를 통해 초기 데이터를 설정한다.

  - `InputView`를 통해 자동차 이름과 시도 횟수를 입력받는다.
  - 입력받은 데이터를 `GameModel`에 저장한다.
  - `GameModel`을 `OutputView`에 주입한다.

- `racing()` 메서드를 통해 자동차를 이동시킨다.
  - `GameModel`의 `tryCount`만큼 반복한다.
  - `GameModel`의 `cars`를 순회하며 자동차를 이동시킨다.
  - `GameModel`의 `cars`와 `currentTryCount`를 업데이트하여 등록된 `OutputView`의 `print()` 메서드를 실행하여 화면을 출력한다.
- `setWinners()` 메서드를 통해 최종 우승자를 설정한다.
  - `GameModel`의 `cars`를 순회하며 최대 이동 거리를 구한다.
  - 최대 이동 거리를 가진 자동차를 `GameModel`의 `winners`에 등록한다.
  - `GameModel`의 `winners`를 업데이트하여 등록된 `OutputView`의 `print()` 메서드를 실행하여 화면을 출력한다.

## App

- `GameController`를 생성하여 게임을 실행한다.
