# 우아한테크코스 프리코스 6기 2주차 미션 문서

## 코멘트

2주 차 미션에서는 1주 차에서 학습한 것에 더해 `함수를 분리`하고,  
`각 함수별로 테스트를 작성하는 것`에 익숙해지는 것을 목표로 하고 있어요.

이번에 테스트를 처음 접하시는 분들은  
언어별 `테스트 도구를 학습`하고 `작은 단위의 기능부터 테스트를 작성`해보길 바랍니다.

## 생각

- 이번 주차에 배워야겠다고 다짐한 것이 메일로 날아왔다. 반드시 목표를 달성해보자.
- indent 제한이 2 이하다. 매우 적극적으로 고차함수와 파이프라인을 적용해보자.
- 클래스 내부에서 private과 public을 확실하게 명세하자.
- 그런데 굳이 클래스를 사용해야할까?
  - 함수형 vs 객체지향의 개인적 선호도를 체감해보자.
  - 이번에는 최대한 함수만으로 모든 걸 구현해보자.
- 파일 디렉토리 구조를 세부적으로 나누는 것을 목표로 하자.
- jsdoc을 적극적으로 적용해보자.

## 고민

### 1. 도대체 랜덤 로직은 테스트를 어떻게 짜야하는 것인가?

#### 몬테카를로 방법을 적용해야할까?

음.... 근데 그거는 해의 범위를 너무 주관적으로 설정한 채로 테스트가 진행된다. 코드에 따라서 테스트도 오래걸릴거고..

#### 반대로 생각해서 '랜덤 함수' 자체를 테스트하는 게 맞는 걸까?

어차피 랜덤 함수 자체를 검증하는 것은 바보 짓이라는 결론에 이르렀다.  
랜덤 함수가 적용되어야 할 로직을 테스트하는 것이 정당해보인다.

그렇다면 '랜덤 함수'를 로직에서 추출해내고, 그 값을 파라미터든 뭐든 로직으로 넘겨주는 식으로 구현하면 충분히 테스트 가능한 '랜덤 없는 랜덤 로직' 이 만들어질 듯 하다!

## Todos

### 유틸리티

가장 작은 코드 단위는 유틸리티라고 생각한다.  
유틸리티가 모여 전체적인 코드를 구성하게 된다고 생각한다.

따라서 유틸리티 먼저 구현해보자.

#### 상수들

`const.js` 코드 내부에 구현하며, 클래스나 함수를 작성하지 않는다.  
반드시 값 = 데이터 형식으로만 작성한다.

- [x] const.js 파일 생성
- [x] 구현에 필요한 상수들 작성 및 export
  - 이름 길이 제한: 5
  - 전진 임계 값: 4
  - 알파벳들: a~z, A~Z, a~zA~Z
  - 1의 자리 숫자들: 0~9

#### 에러

`error.js` 코드 내부에 구현하며, `Error` 객체를 확장하여 클래스로 구현한다. 함수를 작성할 수 있지만 이를 export 하지는 않는다.

- [x] error.js 파일 생성
- [x] InvalidPlayerNameError 구현 (플레이어 이름이 유효하지 않을 때 사용)
- [x] TryAmountError 구현 (시도 횟수가 유효하지 않을 때 사용)

#### 유효성

`validity.js` 코드 내부에 구현하며, 전부 함수로만 구현한다.  
만약 유효하지 않다면 에러를 출력하고 프로그램을 종료한다.

- [x] validity.js 파일 생성
- [x] 이름 유효 검증 함수 테스트 작성
  - 5자 이하의 문자열
  - 문자 사이에 공백포함 x (단, 양 끝에는 존재 가능. 그러나 문자열 길이에 포함되지는 않는다.)
  - 특수문자 포함 x
  - 숫자 가능 (0~9)
  - 대소문자 구별 (이름 aa와 aA는 다르다.)
- [x] 이름 유효 검증 함수 구현
- [x] 횟수 유효 검증 함수 테스트 작성
  - 1 이상의 '정수'(정수가 아닌 실수 제외)만 받을 수 있다.
- [x] 횟수 유효 검증 함수 구현

#### 확률

`prob.js` 코드 내부에 구현하며, 전부 함수로만 구현한다.

- [x] prob.js 파일 생성
- [x] isFowardAllowed 함수를 구현한다. [0, 9] 범위의 값을 랜덤으로 가져오고, const.js에 작성된 전진 임계 값을 기준으로 미만이면 false, 이상이면 true를 리턴한다.

### 게임 구현

#### 1. 이름 입력

- [x] io.js 파일 생성
- [x] 이름들 입력받는 함수 구현 (이름 유효 검증은 안함)
- [x] 쉼표 기준으로 문자열을 나누는 메소드 테스트 및 코드 구현
- [x] 이름들 입력받는 함수에 이름 유효 검증 적용, 테스트 구현
  - 이름 목록에 중복되는 이름이 있으면 에러를 발생시키고 프로그램을 종료시킨다.

#### 2. 시도 횟수 입력

- [x] 시도 횟수 입력받는 함수 구현 (횟수 유효 검증은 안함)
- [x] 시도 횟수 입력 함수에 횟수 유효 검증 적용

#### 3. 게임 1차수 실행

- [x] 각 이름들을 key로 하고 value는 0으로 할당한 오브젝트를 생성하는 메소드 테스트 작성 및 구현
- [x] 위 오브젝트에 대해 이름을 파라미터로 호출하면 해당 이름(key)에 대응되는 value를 1 증가시카는 메소드 테스트 작성 및 구현
- [x] 각 key를 1회 씩 순회하며 isFowardAllowed 함수를 호출하고, 값에 따라 그 value를 증가시킬지 말지 결정하는 기능을 구현.
- [x] io.js에 위 오브젝트를 넘겨주면 실행 결과를 출력하는 코드 구현

#### 4. 게임 반복

- [x] 입력받은 횟수만큼 게임 차수를 반복시킨다.
- [x] 게임 차수가 반복될 때마다 게임 결과를 출력시킨다.

#### 5. 최종 우승자 결정

- [x] 3번의 오브젝트를 파라미터로 받아서 최종 우승자를 결정하는 로직 테스트 및 구현
- [x] 최종 우승자 목록을 파라미터로 받아서 출력하는 함수 테스트 및 구현
